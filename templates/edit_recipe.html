{% extends "base.html" %}

{% block title %}Edit Recipe - Smart Recipe Finder{% endblock %}

{% block content %}
<div class="container my-5">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card shadow">
                <div class="card-body p-5">
                    <h2 class="text-center mb-4">
                        <i class="bi bi-pencil-square"></i> Edit Recipe
                    </h2>
                    <p class="text-center text-muted mb-4">
                        Update your recipe details
                    </p>
                    
                    <form method="POST" action="{{ url_for('edit_recipe', recipe_id=recipe.recipe_id) }}">
                        <!-- Recipe Name -->
                        <div class="mb-4">
                            <label for="name" class="form-label fw-bold">
                                <i class="bi bi-card-heading"></i> Recipe Name *
                            </label>
                            <input 
                                type="text" 
                                class="form-control form-control-lg" 
                                id="name" 
                                name="name" 
                                value="{{ recipe.name }}"
                                required
                                maxlength="255"
                            >
                        </div>
                        
                        <!-- Ingredients -->
                        <div class="mb-4">
                            <label for="ingredients" class="form-label fw-bold">
                                <i class="bi bi-basket"></i> Ingredients *
                            </label>
                            <textarea 
                                class="form-control" 
                                id="ingredients" 
                                name="ingredients" 
                                rows="5" 
                                required
                            >{{ recipe.ingredients }}</textarea>
                            <div class="form-text">
                                <i class="bi bi-info-circle"></i> Separate each ingredient with a comma.
                            </div>
                        </div>
                        
                        <!-- Instructions -->
                        <div class="mb-4">
                            <label for="instructions" class="form-label fw-bold">
                                <i class="bi bi-list-ol"></i> Cooking Instructions *
                            </label>
                            <textarea 
                                class="form-control" 
                                id="instructions" 
                                name="instructions" 
                                rows="8" 
                                required
                            >{{ recipe.instructions }}</textarea>
                        </div>
                        
                        <!-- Prep Time -->
                        <div class="mb-4">
                            <label for="prep_time" class="form-label fw-bold">
                                <i class="bi bi-clock"></i> Preparation Time (minutes) *
                            </label>
                            <input 
                                type="number" 
                                class="form-control" 
                                id="prep_time" 
                                name="prep_time" 
                                value="{{ recipe.prep_time }}"
                                required
                                min="1"
                                max="600"
                            >
                        </div>
                        
                        <!-- Image URL -->
                        <div class="mb-4">
                            <label for="image_url" class="form-label fw-bold">
                                <i class="bi bi-image"></i> Image URL (optional)
                            </label>
                            <input 
                                type="url" 
                                class="form-control" 
                                id="image_url" 
                                name="image_url" 
                                value="{{ recipe.image_url }}"
                            >
                            
                            <!-- Current Image Preview -->
                            <div class="mt-3">
                                <p class="small text-muted">Current Image:</p>
                                <img src="{{ recipe.image_url }}" alt="{{ recipe.name }}" class="img-fluid rounded" style="max-height: 200px;">
                            </div>
                        </div>
                        
                        <!-- Submit Buttons -->
                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i class="bi bi-check-circle"></i> Update Recipe
                            </button>
                            <a href="{{ url_for('recipe_detail', recipe_id=recipe.recipe_id) }}" class="btn btn-outline-secondary">
                                <i class="bi bi-x-circle"></i> Cancel
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}